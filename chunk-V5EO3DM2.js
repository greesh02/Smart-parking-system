import{a as ke,b as xe,c as we,d as ze,e as Ie,f as Oe,g as Le,i as Pe,j as De,l as Ee,m as Se}from"./chunk-INJLICD2.js";import{$ as pe,B as K,C as le,D as Q,E as s,F as x,Fa as Ce,G as w,J as I,K as z,L as ce,M as Y,O as _,S as d,T as n,U as r,V as p,W as de,X as k,Y as v,Z as g,_ as ge,a as D,aa as me,b as E,ba as he,c as W,ca as ue,d as te,da as l,e as ie,ea as m,f as S,fa as u,ga as R,h as ne,ha as A,i as ae,ia as F,ja as Z,k as T,ka as _e,l as re,la as ve,m as U,ma as fe,na as q,oa as J,p as oe,pa as ye,q as se,s as b,t as f,u as y,v as h,va as B,w as M,wa as V,xa as Me,y as N,ya as j,z as $,za as be}from"./chunk-FQTKUZC5.js";var Ge=["*"],L=class{_ngZone;_pending=[];_listeners=[];_targetStream=new S(void 0);_clearListeners(){for(let a of this._listeners)a.remove();this._listeners=[]}constructor(a){this._ngZone=a}getLazyEmitter(a){return this._targetStream.pipe(re(e=>{let t=new te(o=>{if(!e){this._pending.push({observable:t,observer:o});return}let c=e.addListener(a,C=>{this._ngZone.run(()=>o.next(C))});if(!c){o.complete();return}return this._listeners.push(c),()=>c.remove()});return t}))}setTarget(a){let e=this._targetStream.value;a!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(a),this._pending.forEach(t=>t.observable.subscribe(t.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},O={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Te="500px",Re="500px",G=(()=>{class i{_elementRef=b(K);_ngZone=b(w);_eventManager=new L(b(w));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=Te;width=Re;mapId;mapTypeId;set center(e){this._center=e}_center;set zoom(e){this._zoom=e}_zoom;set options(e){this._options=e||O}_options=O;mapInitialized=new x;authFailure=new x;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let e=b(le);if(this._isBrowser=be(e),this._isBrowser){let t=window;t.google,this._existingAuthFailureCallback=t.gm_authFailure,t.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();let t=this.googleMap;t&&(e.options&&t.setOptions(this._combineOptions()),e.center&&this._center&&t.setCenter(this._center),e.zoom&&this._zoom!=null&&t.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&t.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(e=>this._initialize(e.Map))}))}_initialize(e){this._ngZone.runOutsideAngular(()=>{this.googleMap=new e(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let e=window;e.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(e,t){this._assertInitialized(),this.googleMap.fitBounds(e,t)}panBy(e,t){this._assertInitialized(),this.googleMap.panBy(e,t)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,t){this._assertInitialized(),this.googleMap.panToBounds(e,t)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(T(1)).toPromise()}_setSize(){if(this._mapEl){let e=this._mapEl.style;e.height=this.height===null?"":Ae(this.height)||Te,e.width=this.width===null?"":Ae(this.width)||Re}}_combineOptions(){let e=this._options||{};return E(D({},e),{center:this._center||e.center||O.center,zoom:this._zoom??e.zoom??O.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||O.mapTypeId,mapId:this.mapId||e.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=z({type:i,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[$],ngContentSelectors:Ge,decls:2,vars:0,consts:[[1,"map-container"]],template:function(t,o){t&1&&(ge(),de(0,"div",0),pe(1))},encapsulation:2,changeDetection:0})}return i})(),He=/([A-Za-z%]+)$/;function Ae(i){return i==null?"":He.test(i)?i:`${i}px`}var Ze=(()=>{class i{_googleMap=b(G);_elementRef=b(K);_ngZone=b(w);_eventManager=new L(b(w));_options=new S({});_position=new S(void 0);_destroy=new ie;infoWindow;set options(e){this._options.next(e||{})}set position(e){this._position.next(e)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new x;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(T(1)).subscribe(e=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,e):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>{this._initialize(t.InfoWindow,e)})})})}_initialize(e,t){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new e(t),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(e,t){this.open({getAnchor:()=>e},void 0,t)}open(e,t,o){this._assertInitialized();let c=e?e.getAnchor():void 0;(this.infoWindow.get("anchor")!==c||!c)&&(this._elementRef.nativeElement.style.display=o?"none":"",o&&this.infoWindow.setContent(o),this.infoWindow.open({map:this._googleMap.googleMap,anchor:c,shouldFocus:t}))}_combineOptions(){return ae([this._options,this._position]).pipe(ne(([e,t])=>E(D({},e),{position:t||e.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(U(this._destroy)).subscribe(e=>{this._assertInitialized(),this.infoWindow.setOptions(e)})}_watchForPositionChanges(){this._position.pipe(U(this._destroy)).subscribe(e=>{e&&(this._assertInitialized(),this.infoWindow.setPosition(e))})}_assertInitialized(){}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Y({type:i,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return i})();var We=new se("MAP_MARKER"),Ue={position:{lat:37.421995,lng:-122.084092}},Be=(()=>{class i{_googleMap=b(G);_ngZone=b(w);_eventManager=new L(b(w));set title(e){this._title=e}_title;set position(e){this._position=e}_position;set label(e){this._label=e}_label;set clickable(e){this._clickable=e}_clickable;set options(e){this._options=e}_options;set icon(e){this._icon=e}_icon;set visible(e){this._visible=e}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new x;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([e,t])=>{this._initialize(e,t.Marker)})}))}_initialize(e,t){this._ngZone.runOutsideAngular(()=>{this.marker=new t(this._combineOptions()),this._assertInitialized(),this.marker.setMap(e),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(e){let{marker:t,_title:o,_position:c,_label:C,_clickable:P,_icon:X,_visible:ee}=this;t&&(e.options&&t.setOptions(this._combineOptions()),e.title&&o!==void 0&&t.setTitle(o),e.position&&c&&t.setPosition(c),e.label&&C!==void 0&&t.setLabel(C),e.clickable&&P!==void 0&&t.setClickable(P),e.icon&&X&&t.setIcon(X),e.visible&&ee!==void 0&&t.setVisible(ee))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(T(1)).toPromise()}_combineOptions(){let e=this._options||Ue;return E(D({},e),{title:this._title||e.title,position:this._position||e.position,label:this._label||e.label,clickable:this._clickable??e.clickable,map:this._googleMap.googleMap,icon:this._icon||e.icon,visible:this._visible??e.visible})}_assertInitialized(){}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Y({type:i,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[_e([{provide:We,useExisting:i}]),$]})}return i})();var Ve=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=ce({type:i});static \u0275inj=oe({})}return i})();function Qe(i,a){if(i&1&&(n(0,"p",37),l(1),r()),i&2){let e=g().ngIf,t=g();s(),u(" ",t.formatDistance(e.distanceMatrixResponseItem.distanceMeters)," away ")}}function Ye(i,a){if(i&1&&(n(0,"section",14)(1,"div",15),h(),n(2,"svg",16),p(3,"path",38),r(),M(),n(4,"h4",19),l(5,"AI Observation"),r()(),n(6,"div",39)(7,"p"),l(8),r()()()),i&2){let e=g().ngIf;s(8),m(e.parkingLot.aiDescription)}}function qe(i,a){i&1&&(n(0,"div",51),h(),n(1,"svg",52),p(2,"circle",53)(3,"path",54),r()())}function Je(i,a){if(i&1){let e=k();n(0,"div",43)(1,"div",44),l(2),r(),n(3,"div",45),v("click",function(){let o=f(e).$implicit,c=g(3);return y(c.openPreview(o))}),n(4,"img",46),v("load",function(){let o=f(e).index,c=g(3);return y(c.onImageLoad(o))}),r(),n(5,"div",47),h(),n(6,"svg",48),p(7,"path",49),r()(),_(8,qe,4,0,"div",50),r()()}if(i&2){let e=a.$implicit,t=a.index,o=g(2).ngIf,c=g();s(2),m(t===0?"Original":"Processed"),s(2),d("src",e,Q)("alt",o.parkingLot.lotId+" "+(t===0?"original":"processed")),s(4),d("ngIf",c.loadingStates[t])}}function Xe(i,a){if(i&1&&(n(0,"section",14)(1,"div",15),h(),n(2,"svg",16),p(3,"path",40),r(),M(),n(4,"h4",19),l(5,"Images"),r()(),n(6,"div",41),_(7,Je,9,4,"div",42),r()()),i&2){let e=g(2);s(7),d("ngForOf",e.images)}}function et(i,a){i&1&&(n(0,"div",55),h(),n(1,"svg",56),p(2,"path",57),r(),M(),n(3,"p"),l(4,"Loading images..."),r()())}function tt(i,a){if(i&1&&(n(0,"div",22)(1,"span",23),l(2,"Street"),r(),n(3,"span",24),l(4),r()()),i&2){let e=g().ngIf;s(4),m(e.parkingLot.streetAddress)}}function it(i,a){if(i&1&&(n(0,"div",22)(1,"span",23),l(2,"Landmark"),r(),n(3,"span",24),l(4),r()()),i&2){let e=g().ngIf;s(4),m(e.parkingLot.landmark)}}function nt(i,a){if(i&1&&(n(0,"div",22)(1,"span",23),l(2,"City"),r(),n(3,"span",24),l(4),r()()),i&2){let e=g().ngIf;s(4),m(e.parkingLot.city)}}function at(i,a){if(i&1&&(n(0,"div",22)(1,"span",23),l(2,"State"),r(),n(3,"span",24),l(4),r()()),i&2){let e=g().ngIf;s(4),m(e.parkingLot.state)}}function rt(i,a){if(i&1&&(n(0,"div",22)(1,"span",23),l(2,"Postal Code"),r(),n(3,"span",24),l(4),r()()),i&2){let e=g().ngIf;s(4),m(e.parkingLot.postalCode)}}function ot(i,a){if(i&1&&(n(0,"div",22)(1,"span",23),l(2,"Country"),r(),n(3,"span",24),l(4),r()()),i&2){let e=g().ngIf;s(4),m(e.parkingLot.country)}}function st(i,a){if(i&1&&(n(0,"div",61)(1,"span",62),l(2,"Camera Service"),r(),n(3,"span",63),l(4),r()()),i&2){let e=g(2).ngIf;s(4),m(e.parkingLot.lastUpdated.cameraService)}}function lt(i,a){if(i&1&&(n(0,"div",61)(1,"span",62),l(2,"AI Service"),r(),n(3,"span",63),l(4),r()()),i&2){let e=g(2).ngIf;s(4),m(e.parkingLot.lastUpdated.aiService)}}function ct(i,a){if(i&1&&(n(0,"section",14)(1,"div",15),h(),n(2,"svg",16),p(3,"path",58),r(),M(),n(4,"h4",19),l(5,"Last Updated"),r()(),n(6,"div",59),_(7,st,5,1,"div",60)(8,lt,5,1,"div",60),r()()),i&2){let e=g().ngIf;s(7),d("ngIf",e.parkingLot.lastUpdated.cameraService),s(),d("ngIf",e.parkingLot.lastUpdated.aiService)}}function dt(i,a){if(i&1){let e=k();n(0,"aside",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"h3",7),l(5),r(),_(6,Qe,2,1,"p",8),r(),n(7,"button",9),v("click",function(){f(e);let o=g();return y(o.close.emit())}),h(),n(8,"svg",10),p(9,"path",11),r()()(),_(10,Ye,9,1,"section",12)(11,Xe,8,1,"section",13)(12,et,5,0,"ng-template",null,0,ye),M(),n(14,"section",14)(15,"div",15),h(),n(16,"svg",16),p(17,"path",17)(18,"path",18),r(),M(),n(19,"h4",19),l(20,"Location"),r()(),n(21,"div",20),_(22,tt,5,1,"div",21)(23,it,5,1,"div",21)(24,nt,5,1,"div",21)(25,at,5,1,"div",21)(26,rt,5,1,"div",21)(27,ot,5,1,"div",21),n(28,"div",22)(29,"span",23),l(30,"Coordinates"),r(),n(31,"span",24),l(32),q(33,"number"),q(34,"number"),r()()()(),n(35,"section",14)(36,"div",15),h(),n(37,"svg",16),p(38,"path",25),r(),M(),n(39,"h4",19),l(40,"Parking Slots"),r()(),n(41,"div",26)(42,"div",27)(43,"div",28)(44,"span",29),l(45,"Car"),r(),n(46,"span",30),l(47),r()(),n(48,"div",31)(49,"span",32),l(50),r(),n(51,"span",32),l(52),r()()(),n(53,"div",27)(54,"div",28)(55,"span",29),l(56,"Motorbike"),r(),n(57,"span",30),l(58),r()(),n(59,"div",31)(60,"span",32),l(61),r(),n(62,"span",32),l(63),r()()(),n(64,"div",27)(65,"div",28)(66,"span",29),l(67,"Bus"),r(),n(68,"span",30),l(69),r()(),n(70,"div",31)(71,"span",32),l(72),r(),n(73,"span",32),l(74),r()()()()(),_(75,ct,9,2,"section",12),n(76,"div",33)(77,"button",34),v("click",function(){f(e);let o=g();return y(o.openMaps())}),h(),n(78,"svg",35),p(79,"path",36),r(),M(),n(80,"span"),l(81,"Navigate with Google Maps"),r()()()()()}if(i&2){let e=a.ngIf,t=me(13),o=g();s(5),m(e.parkingLot.lotId),s(),d("ngIf",e.distanceMatrixResponseItem),s(4),d("ngIf",e.parkingLot.aiDescription),s(),d("ngIf",o.images.length>0)("ngIfElse",t),s(11),d("ngIf",e.parkingLot.streetAddress),s(),d("ngIf",e.parkingLot.landmark),s(),d("ngIf",e.parkingLot.city),s(),d("ngIf",e.parkingLot.state),s(),d("ngIf",e.parkingLot.postalCode),s(),d("ngIf",e.parkingLot.country),s(5),R("",J(33,23,e.parkingLot.position.y,"1.6-6"),", ",J(34,26,e.parkingLot.position.x,"1.6-6")),s(15),u("",(e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.availableSlotsCount==null?null:e.parkingLot.slotInfo.availableSlotsCount.car)??0," available"),s(3),u("Occupied: ",(e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.occupiedSlotsCount==null?null:e.parkingLot.slotInfo.occupiedSlotsCount.car)??0),s(2),u("Total: ",((e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.availableSlotsCount==null?null:e.parkingLot.slotInfo.availableSlotsCount.car)??0)+((e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.occupiedSlotsCount==null?null:e.parkingLot.slotInfo.occupiedSlotsCount.car)??0)),s(6),u("",(e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.availableSlotsCount==null?null:e.parkingLot.slotInfo.availableSlotsCount.motorbike)??0," available"),s(3),u("Occupied: ",(e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.occupiedSlotsCount==null?null:e.parkingLot.slotInfo.occupiedSlotsCount.motorbike)??0),s(2),u("Total: ",((e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.availableSlotsCount==null?null:e.parkingLot.slotInfo.availableSlotsCount.motorbike)??0)+((e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.occupiedSlotsCount==null?null:e.parkingLot.slotInfo.occupiedSlotsCount.motorbike)??0)),s(6),u("",(e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.availableSlotsCount==null?null:e.parkingLot.slotInfo.availableSlotsCount.bus)??0," available"),s(3),u("Occupied: ",(e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.occupiedSlotsCount==null?null:e.parkingLot.slotInfo.occupiedSlotsCount.bus)??0),s(2),u("Total: ",((e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.availableSlotsCount==null?null:e.parkingLot.slotInfo.availableSlotsCount.bus)??0)+((e.parkingLot.slotInfo==null||e.parkingLot.slotInfo.occupiedSlotsCount==null?null:e.parkingLot.slotInfo.occupiedSlotsCount.bus)??0)),s(),d("ngIf",e.parkingLot.lastUpdated)}}function gt(i,a){if(i&1){let e=k();n(0,"div",64),v("click",function(){f(e);let o=g();return y(o.closePreview())}),n(1,"div",65),v("click",function(o){return f(e),y(o.stopPropagation())}),p(2,"img",66),n(3,"button",67),v("click",function(){f(e);let o=g();return y(o.closePreview())}),h(),n(4,"svg",10),p(5,"path",11),r()()()()}if(i&2){let e=g();s(2),d("src",e.previewImage,Q)}}var H=class i{constructor(a){this.svc=a}item;close=new x;images=[];loadingStates=[];previewImage=null;ngOnInit(){return W(this,null,function*(){if(!this.item)return;let a=[];this.item.parkingLot.imageUrlOriginal&&a.push(this.item.parkingLot.imageUrlOriginal),this.item.parkingLot.imageUrlProcessed&&a.push(this.item.parkingLot.imageUrlProcessed),a.length&&(this.loadingStates=new Array(a.length).fill(!0),this.images=yield Promise.all(a.map(e=>this.svc.getImageUrl(e))),console.log(this.images,"Resolved image URLs"))})}onImageLoad(a){this.loadingStates[a]=!1}openPreview(a){this.previewImage=a}closePreview(){this.previewImage=null}openMaps(){if(!this.item)return;let a=`${this.item.parkingLot.position.y},${this.item.parkingLot.position.x}`;window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(a)}&travelmode=driving`,"_blank")}formatDistance(a){return a?a<1e3?`${a}m`:`${(a/1e3).toFixed(1)}km`:"-"}static \u0275fac=function(e){return new(e||i)(I(Ee))};static \u0275cmp=z({type:i,selectors:[["app-parking-detail"]],inputs:{item:"item"},outputs:{close:"close"},decls:2,vars:2,consts:[["loadingBlock",""],["class","detail-panel",4,"ngIf"],["class","preview-backdrop",3,"click",4,"ngIf"],[1,"detail-panel"],[1,"detail-content"],[1,"detail-header"],[1,"header-info"],[1,"detail-title"],["class","detail-subtitle",4,"ngIf"],["aria-label","Close",1,"close-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["class","detail-section",4,"ngIf"],["class","detail-section",4,"ngIf","ngIfElse"],[1,"detail-section"],[1,"section-header"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"section-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"section-title"],[1,"info-grid"],["class","info-item",4,"ngIf"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"slots-grid"],[1,"slot-card"],[1,"slot-header"],[1,"slot-type"],[1,"slot-badge","badge-success"],[1,"slot-details"],[1,"slot-detail"],[1,"detail-actions"],[1,"btn","btn-primary","action-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"action-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"],[1,"detail-subtitle"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"ai-content"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"images-grid"],["class","image-wrapper",4,"ngFor","ngForOf"],[1,"image-wrapper"],[1,"image-label"],[1,"image-container",3,"click"],[1,"detail-image",3,"load","src","alt"],[1,"image-overlay"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"zoom-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 11v6m4-3H7"],["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"spinner"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4","opacity","0.25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z","opacity","0.75"],[1,"loading-state"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"loading-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"update-info"],["class","update-item",4,"ngIf"],[1,"update-item"],[1,"update-label"],[1,"update-value"],[1,"preview-backdrop",3,"click"],[1,"preview-container",3,"click"],["alt","Preview",1,"preview-image",3,"src"],["aria-label","Close preview",1,"preview-close",3,"click"]],template:function(e,t){e&1&&_(0,dt,82,29,"aside",1)(1,gt,6,1,"div",2),e&2&&(d("ngIf",t.item),s(),d("ngIf",t.previewImage))},dependencies:[j,B,V,Me],styles:[".detail-panel[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:600px;max-width:95vw;max-height:95vh;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-xl);box-shadow:var(--shadow-xl);z-index:var(--z-modal);display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_fadeInScale var(--transition-slow) ease-out}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto;max-height:100%;padding:var(--space-lg);gap:var(--space-lg)}.detail-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.detail-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary);border-radius:var(--radius-full)}.detail-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border);border-radius:var(--radius-full)}.detail-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-tertiary)}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md);padding-bottom:var(--space-md);border-bottom:1px solid var(--divider)}.header-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs)}.detail-title[_ngcontent-%COMP%]{font-size:var(--text-xl);font-weight:var(--font-weight-bold);color:var(--text-primary);margin:0}.detail-subtitle[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-secondary);margin:0}.close-button[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:var(--bg-tertiary);border:1px solid var(--border);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast);flex-shrink:0}.close-button[_ngcontent-%COMP%]:hover{background:var(--danger-light);border-color:var(--danger);color:var(--danger)}.close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.section-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:var(--primary);flex-shrink:0}.section-title[_ngcontent-%COMP%]{font-size:var(--text-base);font-weight:var(--font-weight-semibold);color:var(--text-primary);margin:0}.ai-content[_ngcontent-%COMP%]{padding:var(--space-md);background:var(--primary-light);border:1px solid var(--primary);border-radius:var(--radius-md)}.ai-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-primary);line-height:var(--line-height-relaxed);margin:0}.images-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.image-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.image-label[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);left:var(--space-sm);background:#000000b3;color:var(--text-inverse);font-size:var(--text-xs);font-weight:var(--font-weight-semibold);padding:var(--space-xs) var(--space-sm);border-radius:var(--radius-md);z-index:2;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.image-container[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:var(--radius-lg);overflow:hidden;cursor:pointer;border:2px solid var(--border);transition:all var(--transition-base);background:var(--bg-tertiary);aspect-ratio:16 / 9}.image-container[_ngcontent-%COMP%]:hover{border-color:var(--primary);box-shadow:var(--shadow-md);transform:translateY(-2px)}.image-container[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.detail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity var(--transition-base);z-index:1}.zoom-icon[_ngcontent-%COMP%]{width:32px;height:32px;color:var(--text-inverse)}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;align-items:center;justify-content:center;z-index:2;border-radius:var(--radius-lg)}.spinner[_ngcontent-%COMP%]{width:32px;height:32px;animation:_ngcontent-%COMP%_spin 1s linear infinite;color:var(--primary)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-3xl);text-align:center;color:var(--text-tertiary)}.loading-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin-bottom:var(--space-md);color:var(--text-tertiary);opacity:.5}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-secondary);margin:0}.info-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md);padding:var(--space-sm) 0;border-bottom:1px solid var(--divider)}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:var(--font-weight-medium);color:var(--text-secondary);flex-shrink:0;min-width:100px}.info-value[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-primary);text-align:right;word-break:break-word}.slots-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.slot-card[_ngcontent-%COMP%]{padding:var(--space-md);background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius-md);transition:all var(--transition-base)}.slot-card[_ngcontent-%COMP%]:hover{border-color:var(--primary);box-shadow:var(--shadow-sm)}.slot-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-sm);gap:var(--space-sm)}.slot-type[_ngcontent-%COMP%]{font-size:var(--text-base);font-weight:var(--font-weight-semibold);color:var(--text-primary)}.slot-badge[_ngcontent-%COMP%]{font-size:var(--text-xs);padding:var(--space-xs) var(--space-sm)}.slot-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:var(--space-md);font-size:var(--text-sm);color:var(--text-secondary)}.slot-detail[_ngcontent-%COMP%]{flex:1}.update-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.update-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-sm) 0;border-bottom:1px solid var(--divider)}.update-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.update-label[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:var(--font-weight-medium);color:var(--text-secondary)}.update-value[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-primary)}.detail-actions[_ngcontent-%COMP%]{padding-top:var(--space-md);border-top:1px solid var(--divider)}.action-button[_ngcontent-%COMP%]{width:100%;padding:var(--space-md) var(--space-lg);display:flex;align-items:center;justify-content:center;gap:var(--space-sm);font-size:var(--text-base)}.action-icon[_ngcontent-%COMP%]{width:20px;height:20px}.preview-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:calc(var(--z-modal) + 10);padding:var(--space-lg);animation:fadeIn var(--transition-base) ease-out}.preview-container[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;align-items:center;justify-content:center}.preview-image[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;border-radius:var(--radius-lg);box-shadow:var(--shadow-xl);object-fit:contain}.preview-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-full);color:var(--text-primary);cursor:pointer;transition:all var(--transition-fast);box-shadow:var(--shadow-md)}.preview-close[_ngcontent-%COMP%]:hover{background:var(--danger);border-color:var(--danger);color:var(--text-inverse);transform:scale(1.1)}.preview-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:translate(-50%,-50%) scale(.95)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}@media (max-width: 1024px){.detail-panel[_ngcontent-%COMP%]{width:380px;max-width:85vw}}@media (max-width: 768px){.detail-panel[_ngcontent-%COMP%]{width:95vw;max-width:95vw;max-height:90vh;border-radius:var(--radius-lg);top:50%;transform:translate(-50%,-50%)}.detail-content[_ngcontent-%COMP%], .preview-backdrop[_ngcontent-%COMP%]{padding:var(--space-md)}.preview-close[_ngcontent-%COMP%]{top:-50px;right:var(--space-md)}}@media (max-width: 480px){.detail-panel[_ngcontent-%COMP%]{width:100vw;max-width:100vw;max-height:100vh;border-radius:0;top:0;left:0;transform:none;animation:_ngcontent-%COMP%_slideInUp var(--transition-slow) ease-out}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}"]})};var pt=(i,a)=>({lat:i,lng:a}),mt=i=>({icon:i});function ht(i,a){i&1&&(h(),n(0,"svg",41),p(1,"path",42)(2,"path",43),r())}function ut(i,a){i&1&&(h(),n(0,"svg",41),p(1,"path",44)(2,"path",45),r())}function _t(i,a){i&1&&(n(0,"span",46),l(1,"Searching near:"),r())}function vt(i,a){i&1&&(n(0,"span",46),l(1,"Searching near your current location"),r())}function ft(i,a){if(i&1&&(n(0,"span",47),l(1),r()),i&2){let e=g(2);s(),m(e.searchAddress)}}function yt(i,a){if(i&1&&(n(0,"div",34)(1,"div",35),_(2,ht,3,0,"svg",36)(3,ut,3,0,"svg",36),n(4,"span",37),_(5,_t,2,0,"span",38)(6,vt,2,0,"span",38)(7,ft,2,1,"span",39),n(8,"span",40),l(9),r()()()()),i&2){let e=g();s(2),d("ngIf",e.searchMethod==="address"),s(),d("ngIf",e.searchMethod==="current-location"),s(2),d("ngIf",e.searchMethod==="address"),s(),d("ngIf",e.searchMethod==="current-location"),s(),d("ngIf",e.searchMethod==="address"&&e.searchAddress),s(2),u(" for ",e.formatVehicleType(e.vehicleType)," slots")}}function Mt(i,a){if(i&1&&(n(0,"div",61),h(),n(1,"svg",62),p(2,"path",63),r(),M(),n(3,"span"),l(4),r()()),i&2){let e=g().$implicit,t=g();s(4),u("ETA: ",t.formatDuration(e.distanceMatrixResponseItem==null?null:e.distanceMatrixResponseItem.duration))}}function bt(i,a){if(i&1&&(n(0,"p",64),l(1),r()),i&2){let e=g().$implicit;s(),u(" ",e.parkingLot.aiDescription," ")}}function Ct(i,a){if(i&1){let e=k();n(0,"div",48),v("click",function(){let o=f(e).$implicit,c=g();return y(c.select(o))}),n(1,"div",49),l(2),r(),n(3,"div",50)(4,"div",51)(5,"h4",52),l(6),r(),n(7,"div",53),h(),n(8,"svg",54),p(9,"path",42)(10,"path",43),r(),M(),n(11,"span"),l(12),r()()(),n(13,"div",55)(14,"div",56)(15,"span",57),l(16,"Available"),r(),n(17,"span",58),l(18),r()(),_(19,Mt,5,1,"div",59)(20,bt,2,1,"p",60),r()()()}if(i&2){let e=a.$implicit,t=a.index,o=g();ue("selected",o.selected===e),s(2),m(t+1),s(4),m(e.parkingLot.lotId),s(6),m(o.formatDistance(e.distanceMatrixResponseItem==null?null:e.distanceMatrixResponseItem.distanceMeters)),s(2),he("background-color",o.getAvailabilityBadgeColor(e)),s(4),m(o.getAvailabilityText(e)),s(),d("ngIf",e.distanceMatrixResponseItem==null?null:e.distanceMatrixResponseItem.duration),s(),d("ngIf",e.parkingLot.aiDescription)}}function kt(i,a){i&1&&(n(0,"div",65),h(),n(1,"svg",66),p(2,"path",67),r(),M(),n(3,"p"),l(4,"No parking spots found"),r(),n(5,"p",68),l(6,"Try adjusting your filters"),r()())}function xt(i,a){if(i&1&&(n(0,"map-marker",69)(1,"map-info-window")(2,"div",70)(3,"strong"),l(4,"Your Location"),r()()()()),i&2){let e=g();d("position",e.center)}}function wt(i,a){if(i&1){let e=k();n(0,"map-marker",71),v("mapClick",function(){let o=f(e).$implicit,c=g();return y(c.select(o))}),n(1,"map-info-window")(2,"div",70)(3,"strong"),l(4),r(),n(5,"p"),l(6),r()()()()}if(i&2){let e=a.$implicit,t=a.index,o=g();d("position",fe(5,pt,e.parkingLot.position.y,e.parkingLot.position.x))("title",e.parkingLot.lotId)("options",ve(8,mt,o.getMarkerIcon(t))),s(4),m(e.parkingLot.lotId),s(2),u("",o.getAvailabilityText(e)," available")}}function zt(i,a){if(i&1){let e=k();n(0,"div",72),v("click",function(){f(e);let o=g();return y(o.selected=null)}),r()}}function It(i,a){if(i&1){let e=k();n(0,"app-parking-detail",73),v("close",function(){f(e);let o=g();return y(o.selected=null)}),r()}if(i&2){let e=g();d("item",e.selected)}}var je=class i{constructor(a,e){this.router=a;this.resultPageDataService=e}items=N([]);visible=N([]);selected=null;sortBy="distance";sortDir="asc";minFree=0;vehicleType="car";center={lat:12.96,lng:77.57};zoom=12;searchMethod=null;searchAddress="";mapOptions={zoomControl:!0,mapTypeControl:!0,fullscreenControl:!0,streetViewControl:!0,disableDefaultUI:!1,gestureHandling:"cooperative",mapTypeId:"roadmap",styles:[]};ngOnInit(){let a=this.resultPageDataService.getData();if(this.vehicleType=this.resultPageDataService.getVehicleType(),this.searchMethod=this.resultPageDataService.getSearchMethod(),this.searchAddress=this.resultPageDataService.getSearchAddress(),!a){this.router.navigate(["/home"]);return}let e=a;this.items.set(e.parkingLots||[]),e.coordinates&&(this.center={lat:e.coordinates.latitude,lng:e.coordinates.longitude}),this.applyFilters()}applyFilters(){let a=[...this.items()];this.minFree>0&&(a=a.filter(e=>(e.parkingLot?.slotInfo?.availableSlotsCount?.[this.vehicleType]??0)>=this.minFree)),a.sort((e,t)=>{let o,c;return this.sortBy==="distance"?(o=e.distanceMatrixResponseItem?.distanceMeters??0,c=t.distanceMatrixResponseItem?.distanceMeters??0):this.sortBy==="duration"?(o=this._dur(e.distanceMatrixResponseItem?.duration),c=this._dur(t.distanceMatrixResponseItem?.duration)):this.sortBy==="available"?(o=e.parkingLot?.slotInfo?.availableSlotsCount?.[this.vehicleType]??0,c=t.parkingLot?.slotInfo?.availableSlotsCount?.[this.vehicleType]??0):(o=0,c=0),this.sortDir==="asc"?o-c:c-o}),this.visible.set(a)}_dur(a){if(!a)return 999999;let e=a.match(/^(\d+)s$/);if(e)return Number(e[1]);let t=a.split(":").map(o=>+o);return t.length===3?t[0]*3600+t[1]*60+t[2]:999999}select(a){this.selected=a}getAvailabilityText(a){let e=a.parkingLot?.slotInfo;if(!e)return"-";let t=e.availableSlotsCount?.[this.vehicleType]??0,o=t+(e.occupiedSlotsCount?.[this.vehicleType]??0)||0;return o>0?`${t}/${o}`:"-"}getAvailabilityColor(a){let e=a.parkingLot?.slotInfo;if(!e)return"#ccc";let t=e.availableSlotsCount?.[this.vehicleType]??0,o=t+(e.occupiedSlotsCount?.[this.vehicleType]??0)||0;if(o===0)return"#ccc";let c=t/o,C=Math.round(255*(1-c)),P=Math.round(255*c);return`rgb(${C},${P},0)`}getAvailabilityBadgeColor(a){let e=a.parkingLot?.slotInfo;if(!e)return"var(--danger-light)";let t=e.availableSlotsCount?.[this.vehicleType]??0,o=t+(e.occupiedSlotsCount?.[this.vehicleType]??0)||0;if(o===0)return"var(--danger-light)";let c=t/o;return c>=.5?"var(--success-light)":c>=.2?"var(--warning-light)":"var(--danger-light)"}formatDistance(a){return a?a<1e3?`${a}m`:`${(a/1e3).toFixed(1)}km`:"-"}formatVehicleType(a){return a?a.charAt(0).toUpperCase()+a.slice(1):""}formatDuration(a){if(!a)return"-";let e=0,t=a.match(/^(\d+)s$/);if(t)e=parseInt(t[1],10);else{let c=a.split(":").map(C=>parseInt(C,10));if(c.length===3)e=c[0]*3600+c[1]*60+c[2];else if(c.length===2)e=c[0]*60+c[1];else{let C=parseInt(a,10);if(!isNaN(C))e=C;else return a}}let o=Math.round(e/60);return o===0?"< 1 min":o===1?"1 min":`${o} min`}getMarkerIcon(a){let c=`
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
        <circle cx="16" cy="16" r="14" fill="#4F46E5" stroke="white" stroke-width="2"/>
        <text x="16" y="20" text-anchor="middle" font-size="12" font-weight="bold"
              fill="#FFFFFF" font-family="Poppins, sans-serif">${a+1}</text>
      </svg>
    `;return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(c),scaledSize:new google.maps.Size(30,30),anchor:new google.maps.Point(15,15)}}static \u0275fac=function(e){return new(e||i)(I(Ce),I(Se))};static \u0275cmp=z({type:i,selectors:[["app-results-page"]],decls:51,vars:17,consts:[[1,"results"],[1,"results-container"],[1,"results-header"],[1,"header-content"],[1,"results-title"],[1,"results-subtitle"],["class","search-info",4,"ngIf"],[1,"results-layout"],[1,"sidebar"],[1,"filters-panel","card"],[1,"filters-title"],[1,"filters-row"],[1,"filter-group"],[1,"filter-label"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","distance"],["value","duration"],["value","available"],["value","asc"],["value","desc"],["type","number","min","0","placeholder","0",1,"filter-input",3,"ngModelChange","input","ngModel"],[1,"cards-container"],[1,"cards-header"],[1,"cards-count"],[1,"cards"],["class","parking-card card",3,"selected","click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"map-container"],[1,"map-wrapper"],["height","100%",3,"center","zoom","options"],["title","Your Location",3,"position",4,"ngIf"],[3,"position","title","options","mapClick",4,"ngFor","ngForOf"],["class","detail-backdrop",3,"click",4,"ngIf"],[3,"item","close",4,"ngIf"],[1,"search-info"],[1,"search-info-item"],["class","search-info-icon","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"search-info-text"],["class","search-method-label",4,"ngIf"],["class","search-address",4,"ngIf"],[1,"search-vehicle-type"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"search-info-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 2v2m0 16v2M2 12h2m16 0h2"],[1,"search-method-label"],[1,"search-address"],[1,"parking-card","card",3,"click"],[1,"card-badge"],[1,"card-content"],[1,"card-header"],[1,"card-title"],[1,"card-distance"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"distance-icon"],[1,"card-body"],[1,"availability-badge"],[1,"availability-label"],[1,"availability-value"],["class","card-info",4,"ngIf"],["class","card-description",4,"ngIf"],[1,"card-info"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"info-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"card-description"],[1,"empty-state"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"empty-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"empty-subtitle"],["title","Your Location",3,"position"],[1,"info-window"],[3,"mapClick","position","title","options"],[1,"detail-backdrop",3,"click"],[3,"close","item"]],template:function(e,t){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),l(5,"Parking Results"),r(),n(6,"p",5),l(7),r(),_(8,yt,10,6,"div",6),r()(),n(9,"div",7)(10,"div",8)(11,"div",9)(12,"h3",10),l(13,"Filters"),r(),n(14,"div",11)(15,"div",12)(16,"label",13),l(17,"Sort By"),r(),n(18,"select",14),Z("ngModelChange",function(c){return F(t.sortBy,c)||(t.sortBy=c),c}),v("change",function(){return t.applyFilters()}),n(19,"option",15),l(20,"Distance"),r(),n(21,"option",16),l(22,"Duration"),r(),n(23,"option",17),l(24,"Available Slots"),r()()(),n(25,"div",12)(26,"label",13),l(27,"Order"),r(),n(28,"select",14),Z("ngModelChange",function(c){return F(t.sortDir,c)||(t.sortDir=c),c}),v("change",function(){return t.applyFilters()}),n(29,"option",18),l(30,"Ascending"),r(),n(31,"option",19),l(32,"Descending"),r()()(),n(33,"div",12)(34,"label",13),l(35),r(),n(36,"input",20),Z("ngModelChange",function(c){return F(t.minFree,c)||(t.minFree=c),c}),v("input",function(){return t.applyFilters()}),r()()()(),n(37,"div",21)(38,"div",22)(39,"span",23),l(40),r()(),n(41,"div",24),_(42,Ct,21,10,"div",25)(43,kt,7,0,"div",26),r()()(),n(44,"div",27)(45,"div",28)(46,"google-map",29),_(47,xt,5,1,"map-marker",30)(48,wt,7,10,"map-marker",31),r()()()()(),_(49,zt,1,0,"div",32)(50,It,1,1,"app-parking-detail",33),r()),e&2&&(s(7),R("",t.visible().length," parking ",t.visible().length===1?"spot":"spots"," found"),s(),d("ngIf",t.searchMethod),s(10),A("ngModel",t.sortBy),s(10),A("ngModel",t.sortDir),s(7),u("Min Free ",t.vehicleType," Slots"),s(),A("ngModel",t.minFree),s(4),u("",t.visible().length," results"),s(2),d("ngForOf",t.visible()),s(),d("ngIf",t.visible().length===0),s(3),d("center",t.center)("zoom",t.zoom)("options",t.mapOptions),s(),d("ngIf",t.center),s(),d("ngForOf",t.visible()),s(),d("ngIf",t.selected),s(),d("ngIf",t.selected))},dependencies:[j,B,V,De,Oe,Le,ke,ze,Ie,xe,Pe,we,Ve,G,Ze,Be,H],styles:[".results[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background:linear-gradient(180deg,var(--primary-light) 0%,var(--bg-secondary) 55%);padding:var(--space-md)}.results-container[_ngcontent-%COMP%]{width:100%;max-width:1800px;margin:0 auto;display:flex;flex-direction:column;gap:var(--space-md)}.results-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-sm)}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.results-title[_ngcontent-%COMP%]{font-size:var(--text-3xl);font-weight:var(--font-weight-bold);color:var(--text-primary);margin:0}.results-subtitle[_ngcontent-%COMP%]{font-size:var(--text-base);color:var(--text-secondary);margin:0}.search-info[_ngcontent-%COMP%]{margin-top:var(--space-sm);padding:var(--space-sm) var(--space-md);background:var(--primary-light);border:1px solid var(--primary);border-radius:var(--radius-md);display:inline-flex;align-items:center}.search-info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.search-info-icon[_ngcontent-%COMP%]{width:18px;height:18px;color:var(--primary);flex-shrink:0}.search-info-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:var(--text-sm);color:var(--text-primary)}.search-method-label[_ngcontent-%COMP%]{font-weight:var(--font-weight-medium);color:var(--text-secondary)}.search-address[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold);color:var(--text-primary)}.search-vehicle-type[_ngcontent-%COMP%]{font-weight:var(--font-weight-semibold);color:var(--primary)}.results-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:62% 38%;gap:var(--space-md);height:calc(100vh - 200px);min-height:600px}.map-container[_ngcontent-%COMP%]{position:relative;border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-md);border:1px solid var(--border);background:var(--surface);min-width:0;min-height:0}.map-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:var(--radius-lg);overflow:hidden;min-height:0}.sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);overflow:hidden;min-width:0}.filters-panel[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);display:flex;flex-direction:column;gap:var(--space-sm);flex-shrink:0}.filters-title[_ngcontent-%COMP%]{font-size:var(--text-base);font-weight:var(--font-weight-semibold);color:var(--text-primary);margin:0 0 var(--space-sm) 0}.filters-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:var(--space-sm);flex-wrap:wrap;align-items:flex-end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;min-width:100px}.filter-label[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:var(--font-weight-medium);color:var(--text-secondary)}.filter-select[_ngcontent-%COMP%], .filter-input[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm) var(--space-md);font-size:var(--text-sm)}.cards-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex:1;min-height:0;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm)}.cards-header[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--surface);border-bottom:1px solid var(--border);flex-shrink:0;border-radius:var(--radius-lg) var(--radius-lg) 0 0}.cards-count[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:var(--font-weight-semibold);color:var(--text-secondary)}.cards[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-sm);display:flex;flex-direction:column;gap:var(--space-sm);background:var(--bg-secondary)}.cards[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.cards[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary);border-radius:var(--radius-full)}.cards[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border);border-radius:var(--radius-full)}.cards[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-tertiary)}.parking-card[_ngcontent-%COMP%]{position:relative;padding:var(--space-sm) var(--space-md);cursor:pointer;transition:all var(--transition-base);border:1px solid var(--border);border-radius:var(--radius-md);background:var(--surface);box-shadow:var(--shadow-sm)}.parking-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:var(--shadow-md);border-color:var(--primary)}.parking-card.selected[_ngcontent-%COMP%]{border-color:var(--primary);border-width:2px;box-shadow:0 0 0 3px #3b82f61a;background:var(--primary-light)}.card-badge[_ngcontent-%COMP%]{position:absolute;top:-10px;left:var(--space-lg);width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--primary) 0%,var(--accent) 100%);color:var(--text-inverse);font-size:var(--text-xs);font-weight:var(--font-weight-bold);border-radius:var(--radius-full);box-shadow:var(--shadow);border:2px solid var(--surface);z-index:1}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);padding-top:var(--space-sm)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-sm);margin-bottom:var(--space-xs)}.card-title[_ngcontent-%COMP%]{font-size:var(--text-base);font-weight:var(--font-weight-bold);color:var(--text-primary);margin:0;flex:1;line-height:1.3;padding-left:var(--space-md);margin-top:var(--space-xs)}.card-distance[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:var(--text-sm);font-weight:var(--font-weight-medium);color:var(--text-secondary);white-space:nowrap}.distance-icon[_ngcontent-%COMP%]{width:16px;height:16px;color:var(--primary)}.card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.availability-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:space-between;padding:var(--space-xs) var(--space-sm);border-radius:var(--radius);font-size:var(--text-xs);font-weight:var(--font-weight-semibold);gap:var(--space-xs);width:fit-content;margin-bottom:var(--space-xs)}.availability-label[_ngcontent-%COMP%]{color:var(--text-secondary)}.availability-value[_ngcontent-%COMP%]{font-weight:var(--font-weight-bold);color:var(--text-primary)}.card-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:var(--text-xs);color:var(--text-secondary);margin-top:var(--space-xs)}.info-icon[_ngcontent-%COMP%]{width:14px;height:14px;color:var(--text-tertiary);flex-shrink:0}.card-description[_ngcontent-%COMP%]{font-size:var(--text-xs);color:var(--text-secondary);line-height:var(--line-height-normal);margin:var(--space-xs) 0 0 0;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-3xl);text-align:center;color:var(--text-tertiary)}.empty-icon[_ngcontent-%COMP%]{width:64px;height:64px;margin-bottom:var(--space-md);color:var(--text-tertiary);opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-lg);font-weight:var(--font-weight-semibold);color:var(--text-secondary);margin:0}.empty-subtitle[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-tertiary);margin-top:var(--space-xs)}.info-window[_ngcontent-%COMP%]{padding:var(--space-sm)}.info-window[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:var(--text-base);font-weight:var(--font-weight-semibold);color:var(--text-primary);margin-bottom:var(--space-xs)}.info-window[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-secondary);margin:0}.detail-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:calc(var(--z-modal) - 1);animation:fadeIn var(--transition-base) ease-out}@media (max-width: 1200px){.results-layout[_ngcontent-%COMP%]{grid-template-columns:1.5fr 1fr;gap:var(--space-sm)}}@media (max-width: 1024px){.results-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:450px 1fr;height:auto;min-height:auto}.sidebar[_ngcontent-%COMP%]{max-height:none}.filters-row[_ngcontent-%COMP%]{flex-direction:column}.filter-group[_ngcontent-%COMP%]{min-width:100%}.cards[_ngcontent-%COMP%]{max-height:500px}}@media (max-width: 768px){.results[_ngcontent-%COMP%]{padding:var(--space-md)}.results-header[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.results-title[_ngcontent-%COMP%]{font-size:var(--text-2xl)}.results-subtitle[_ngcontent-%COMP%]{font-size:var(--text-sm)}.results-layout[_ngcontent-%COMP%]{grid-template-rows:350px 1fr;gap:var(--space-md)}.filters-panel[_ngcontent-%COMP%]{padding:var(--space-md);flex-direction:column}.filter-group[_ngcontent-%COMP%]{min-width:100%}.cards-header[_ngcontent-%COMP%], .parking-card[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}.card-title[_ngcontent-%COMP%]{font-size:var(--text-sm)}.card-body[_ngcontent-%COMP%]{gap:var(--space-xs)}}"]})};export{je as ResultsPageComponent};
